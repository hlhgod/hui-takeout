(function(e){function t(t){for(var n,o,c=t[0],i=t[1],l=t[2],p=0,d=[];p<c.length;p++)o=c[p],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,c=1;c<a.length;c++){var i=a[c];0!==s[i]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},s={app:0},r=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=i;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0267":function(e,t,a){"use strict";var n=a("8f81"),s=a.n(n);s.a},"02c5":function(e,t,a){"use strict";var n=a("88a3"),s=a.n(n);s.a},1008:function(e,t,a){"use strict";var n=a("49e5"),s=a.n(n);s.a},"40f7":function(e,t,a){"use strict";var n=a("d611"),s=a.n(n);s.a},"49e5":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view"),a("Footbar",{directives:[{name:"show",rawName:"v-show",value:e.$route.meta.showFooter,expression:"$route.meta.showFooter"}]})],1)},r=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"footer"},[a("router-link",{attrs:{to:"/home",tag:"li",activeClass:"myactive"}},[a("span",[a("i",{staticClass:"iconfont icon-phone"}),a("p",[e._v("外卖")])])]),a("router-link",{attrs:{to:"/search",tag:"li",activeClass:"myactive"}},[a("span",[a("i",{staticClass:"iconfont icon-search"}),a("p",[e._v("查询")])])]),a("router-link",{attrs:{to:"/order",tag:"li",activeClass:"myactive"}},[a("span",[a("i",{staticClass:"iconfont icon-rfq"}),a("p",[e._v("订单")])])]),a("router-link",{attrs:{to:"profiles",tag:"li",activeClass:"myactive"}},[a("span",[a("i",{staticClass:"iconfont icon-account"}),a("p",[e._v("我的")])])])],1)])},c=[],i=(a("fd9a"),a("2877")),l={},u=Object(i["a"])(l,o,c,!1,null,"780bafd2",null),p=u.exports,d={components:{Footbar:p}},m=d,f=(a("5c0b"),Object(i["a"])(m,s,r,!1,null,null,null)),h=f.exports,v=a("8c4f"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("headbar",{attrs:{title:"外卖"}},[a("span",{attrs:{slot:"left"},slot:"left"},[a("i",{staticClass:"iconfont icon-search"}),e._v("查询 ")]),a("span",{attrs:{slot:"right"},slot:"right"},[e._v("登录/注册")])]),a("div",{ref:"homewrap",staticClass:"home-wrap"},[a("div",{staticClass:"nav_swiper"},[e.categories.length?a("div",{staticClass:"swiper-container"},[a("div",{staticClass:"swiper-wrapper"},e._l(e.categoriesArr,(function(t,n){return a("div",{key:n,staticClass:"swiper-slide categoryList"},e._l(t,(function(t){return a("div",{key:t.id,staticClass:"category"},[a("div",{staticClass:"category-img"},[a("img",{attrs:{src:e.baseImageUrl+t.image_url,alt:t.description}})]),a("span",[e._v(e._s(t.title))])])})),0)})),0),a("div",{staticClass:"swiper-pagination"})]):e._e()]),a("div",{staticClass:"shopslist"},[e._m(0),a("div",{ref:"shopsscroll",staticClass:"shopslist-scroll",style:e.mystyle},[a("shoplist")],1)])])],1)},_=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shopslist-header"},[a("i",{staticClass:"iconfont icon-category"}),a("span",[e._v("附近商家")])])}],w=(a("4160"),a("159b"),a("5530")),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._t("left"),a("p",[e._v(e._s(e.title))]),e._t("right")],2)},C=[],x={props:["title"]},y=x,O=(a("40f7"),Object(i["a"])(y,b,C,!1,null,"cf078c92",null)),k=O.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",e._l(e.shops,(function(t){return n("router-link",{key:t.id,staticClass:"shop",attrs:{to:"/shop",tag:"li",activeClass:"myactive"}},[n("div",{staticClass:"shop_img"},[n("img",{attrs:{src:a("717e"),alt:""}})]),n("div",{staticClass:"shop_message"},[n("span",{staticClass:"shop_name"},[e._v(e._s(t.name))]),n("span",[e._v(e._s(t.rating)+" 月售"+e._s(t.recent_order_num)+"单")]),n("span",[e._v("¥"+e._s(t.float_minimum_order_amount)+"/"+e._s(t.piecewise_agent_fee.tips))])]),n("div",{staticClass:"shop_supports"},[n("ul",{staticClass:"shop_supports_icon"},e._l(t.supports,(function(t){return n("li",{key:t.id},[n("span",[e._v(e._s(t.icon_name))])])})),0),n("span",[e._v(e._s(t.delivery_mode.text))])])])})),1)},P=[],$=a("2f62"),T={computed:Object(w["a"])({},Object($["b"])(["shops"])),mounted:function(){this.$store.dispatch("getShopAction")}},S=T,E=(a("a8c1"),Object(i["a"])(S,j,P,!1,null,"79749800",null)),I=E.exports,A=a("b619"),F=a("1fba"),N=(a("f4bd"),{data:function(){return{baseImageUrl:"https://fuss10.elemecdn.com",mystyle:{height:"300px"}}},mounted:function(){this.$store.dispatch("getCategoriesAction"),this.mystyle.height=document.documentElement.clientHeight-300+"px"},watch:{categories:function(e){var t=this;new A["a"](".swiper-container",{loop:!0,pagination:{el:".swiper-pagination",clickable:!0}}),this.$nextTick((function(){new A["a"](".swiper-container",{loop:!0,pagination:{el:".swiper-pagination"}}),t.scroll||(t.scroll=new F["a"](t.$refs.shopsscroll,{}),console.log(t.scroll))}))}},computed:Object(w["a"])({},Object($["b"])(["categories"]),{categoriesArr:function(){var e=[],t=[];return this.categories.forEach((function(a){t.push(a),8==t.length&&(e.push(t),t=[])})),0!==t.length&&e.push(t),e}}),components:{headbar:k,shoplist:I}}),R=N,D=(a("1008"),Object(i["a"])(R,g,_,!1,null,"06c6a9c2",null)),M=D.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("headbar",{attrs:{title:"订单查询"}})],1)},q=[],G={components:{headbar:k}},H=G,J=Object(i["a"])(H,U,q,!1,null,null,null),L=J.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("headbar",{attrs:{title:"查询"}})],1)},z=[],B={components:{headbar:k}},K=B,Q=Object(i["a"])(K,V,z,!1,null,null,null),W=Q.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"profile"},[a("headbar",{attrs:{title:"我的"}}),a("div",{staticClass:"profile_container"},[a("router-link",{staticClass:"login",attrs:{to:"/login",tag:"div"}},[a("div",[a("i",{staticClass:"iconfont icon-accountfilling account"})]),a("div",{staticClass:"phone"},[a("span",[e._v(e._s(e.userInfo.name||"登录/注册"))]),a("span",[a("i",{staticClass:"iconfont icon-mobilephone"},[e._v(e._s(e.userInfo.phone||"暂无绑定手机号"))])])]),a("div",{staticClass:"more"},[a("i",{staticClass:"iconfont icon-more"})])]),e._m(0),e._m(1)],1)],1)},Y=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"balance"},[a("div",[a("span",{staticClass:"money"},[e._v("0.00")]),a("span",[e._v("元")]),a("p",[e._v("我的余额")])]),a("div",[a("span",{staticClass:"mount"},[e._v("0")]),a("span",[e._v("个")]),a("p",[e._v("我的优惠")])]),a("div",[a("span",{staticClass:"score"},[e._v("0")]),a("span",[e._v("分")]),a("p",[e._v("我的积分")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order top-border-1px"},[a("ul",[a("li",{staticClass:"order-item"},[a("i",{staticClass:"iconfont icon-rejectedorder icolor-order"},[e._v("我的订单")]),a("i",{staticClass:"iconfont icon-more"})]),a("li",{staticClass:"order-item"},[a("i",{staticClass:"iconfont icon-gifts icolor-score"},[e._v("积分商城")]),a("i",{staticClass:"iconfont icon-more"})]),a("li",{staticClass:"order-item"},[a("i",{staticClass:"iconfont icon-creditlevelfilling icolor-card"},[e._v("会员卡")]),a("i",{staticClass:"iconfont icon-more"})]),a("li",{staticClass:"order-item center"},[a("i",{staticClass:"iconfont icon-logistic icolor-center"},[e._v("服务中心")]),a("i",{staticClass:"iconfont icon-more"})])])])}],Z={components:{headbar:k},computed:Object(w["a"])({},Object($["b"])(["userInfo"]))},ee=Z,te=(a("0267"),Object(i["a"])(ee,X,Y,!1,null,"6312c238",null)),ae=te.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("div",{staticClass:"return_icon",on:{click:function(t){return e.$router.back()}}},[a("i",{staticClass:"iconfont icon-back"})]),e._m(0),a("div",{staticClass:"switch"},[a("span",{class:{selected:e.messageSelected},on:{click:function(t){e.messageSelected=!0}}},[e._v("短信登录")]),a("span",{class:{selected:!e.messageSelected},on:{click:function(t){e.messageSelected=!1}}},[e._v("密码登录")])]),e.messageSelected?a("div",{staticClass:"message_login"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"text",name:"username",maxlength:"11",id:"username",placeholder:"手机号"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}),a("button",{staticClass:"getVerityCode",style:e.rightPhone?"color:black":"color:#ccc",attrs:{disabled:!e.rightPhone},on:{click:function(t){return t.preventDefault(),e.getCode(t)}}},[e._v(e._s(e.computeTime>0?"已发送("+e.computeTime+"s)":"获取验证码"))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"text",maxlength:"4",name:"captcha",id:"captcha",placeholder:"验证码"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._m(1)]):e._e(),e.messageSelected?e._e():a("div",{staticClass:"password_login"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",name:"username",id:"username",placeholder:"请输入用户名/手机/邮箱"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),"checkbox"===(e.showPassword?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd,expression:"pwd"}],attrs:{name:"password",id:"password",placeholder:"请输入密码",type:"checkbox"},domProps:{checked:Array.isArray(e.pwd)?e._i(e.pwd,null)>-1:e.pwd},on:{change:function(t){var a=e.pwd,n=t.target,s=!!n.checked;if(Array.isArray(a)){var r=null,o=e._i(a,r);n.checked?o<0&&(e.pwd=a.concat([r])):o>-1&&(e.pwd=a.slice(0,o).concat(a.slice(o+1)))}else e.pwd=s}}}):"radio"===(e.showPassword?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd,expression:"pwd"}],attrs:{name:"password",id:"password",placeholder:"请输入密码",type:"radio"},domProps:{checked:e._q(e.pwd,null)},on:{change:function(t){e.pwd=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd,expression:"pwd"}],attrs:{name:"password",id:"password",placeholder:"请输入密码",type:e.showPassword?"text":"password"},domProps:{value:e.pwd},on:{input:function(t){t.target.composing||(e.pwd=t.target.value)}}}),a("mt-switch",{staticClass:"switch-pwd",model:{value:e.showPassword,callback:function(t){e.showPassword=t},expression:"showPassword"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.captcha,expression:"captcha"}],attrs:{type:"text",name:"captcha",maxlength:"4",id:"captcha",placeholder:"验证码"},domProps:{value:e.captcha},on:{input:function(t){t.target.composing||(e.captcha=t.target.value)}}}),a("img",{ref:"captcha",staticClass:"verifycode",attrs:{src:"http://localhost:3000/captcha",alt:"captcha"},on:{click:e.getCaptcha}})],1),a("div",{staticClass:"login_button"},[a("button",{on:{click:e.login}},[e._v("登录")]),a("p",[e._v("关于我们")])])])},se=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logo"},[a("p",[e._v("惠外卖")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"hint"},[e._v(" 温馨提示：未注册惠外卖帐号的手机号，登录时将自动注册，且代表已同意 "),a("a",{attrs:{href:"javascript:;"}},[e._v("《用户服务协议》")])])}],re=(a("b0c0"),a("ac1f"),a("5319"),a("96cf"),a("1da1")),oe=(a("d3b7"),a("bc3a")),ce=a.n(oe),ie=a("b383"),le=a.n(ie);function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(n,s){var r;if("GET"===a){var o=le.a.stringify(t);""!==o&&(e=e+"?"+o),r=ce.a.get(e)}else"POST"===a&&(r=ce.a.post(e,t));r.then((function(e){n(e.data)})).catch((function(e){s(e)}))}))}var pe="http://localhost:3000",de=function(){return ue(pe+"/index_category")},me=function(){return ue(pe+"/index_shops")},fe=function(e){var t=e.phone;return ue(pe+"/sendcode",{phone:t},"POST")},he=function(e){var t=e.name,a=e.pwd,n=e.captcha;return ue(pe+"/login_pwd",{name:t,pwd:a,captcha:n},"POST")},ve=function(e){var t=e.phone,a=e.code;return ue(pe+"/login_sms",{phone:t,code:a},"POST")},ge=a("76a0"),_e=a.n(ge);n["default"].component(ge["Switch"].name,ge["Switch"]);var we={data:function(){return{messageSelected:!0,selected:1,phone:"",code:0,name:"",pwd:"",captcha:"",computeTime:0,showPassword:!1}},methods:{getCode:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.computeTime){t.next=7;break}return e.computeTime=60,e.intervalID=setInterval((function(){e.computeTime--,e.computeTime<=0&&clearInterval(e.intervalID)}),1e3),t.next=5,fe(e.phone);case 5:a=t.sent,1===a.err&&Object(ge["Toast"])(a.msg);case 7:case"end":return t.stop()}}),t)})))()},getCaptcha:function(){this.$refs.captcha.src="http://localhost:3000/captcha?time="+Date.now()},login:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){var a,n,s,r,o,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.messageSelected){t.next=15;break}if(n=e.phone,s=e.code,e.rightPhone){t.next=7;break}return Object(ge["Toast"])("手机号不正确"),t.abrupt("return");case 7:if(/^\d{4}$/.test(s)){t.next=10;break}return Object(ge["Toast"])("验证码必须是4位数字"),t.abrupt("return");case 10:return t.next=12,ve(n,s);case 12:a=t.sent,t.next=35;break;case 15:if(r=e.name,o=e.pwd,c=e.captcha,e.name){t.next=21;break}return Object(ge["Toast"])("必须录入用户名"),t.abrupt("return");case 21:if(e.pwd){t.next=26;break}return Object(ge["Toast"])("密码必须录入"),t.abrupt("return");case 26:if(e.captcha){t.next=29;break}return Object(ge["Toast"])("验证码必须录入"),t.abrupt("return");case 29:return t.next=31,he({name:r,pwd:o,captcha:c});case 31:a=t.sent,console.log(a),e.computeTime&&(e.computeTime=0,clearInterval(e.intervalID),e.intervalID=void 0),0==a.err?(i=a.msg,e.$store.dispatch("recordUser",i),e.$router.replace("/profiles")):(e.getCaptcha(),Object(ge["Toast"])(a.msg));case 35:case"end":return t.stop()}}),t)})))()}},computed:{rightPhone:function(){return/^1\d{10}$/.test(this.phone)}}},be=we,Ce=(a("02c5"),Object(i["a"])(be,ne,se,!1,null,"c777c5c8",null)),xe=Ce.exports;n["default"].use(v["a"]);var ye,Oe=[{path:"/home",name:"Home",component:M,meta:{showFooter:!0}},{path:"/search",name:"Search",component:W,meta:{showFooter:!0}},{path:"/order",name:"Order",component:L,meta:{showFooter:!0}},{path:"/profiles",name:"Profiles",component:ae,meta:{showFooter:!0}},{path:"/",redirect:"/home"},{path:"/login",name:"login",component:xe,meta:{showFooter:!1}}],ke=new v["a"]({base:"/",routes:Oe}),je=ke,Pe={latitude:40.10038,longitude:116.36867,address:{},categories:[],shops:[],userInfo:{},goods:[],ratings:[],info:{},cartFoods:[],searchShops:[]},$e=a("ade3"),Te="receive_address",Se="receive_categories",Ee="receive_shops",Ie=(ye={},Object($e["a"])(ye,Te,(function(e,t){e.address=address})),Object($e["a"])(ye,Se,(function(e,t){e.categories=t})),Object($e["a"])(ye,Ee,(function(e,t){e.shops=t})),Object($e["a"])(ye,void 0,(function(e,t){e.userInfo=t})),ye),Ae={getCategoriesAction:function(e){return Object(re["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,de();case 2:a=t.sent,0===a.err&&e.commit(Se,a.data);case 4:case"end":return t.stop()}}),t)})))()},getShopAction:function(e){return Object(re["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,me();case 2:a=t.sent,0===a.err&&e.commit(Ee,a.data);case 4:case"end":return t.stop()}}),t)})))()},recordUser:function(e,t){e.commit(void 0,t)}},Fe=a("94d5"),Ne=a.n(Fe);n["default"].use($["a"]);var Re=new $["a"].Store({state:Pe,mutations:Ie,actions:Ae,getters:Ne.a});a("aa35");n["default"].config.productionTip=!1,n["default"].use(_e.a),new n["default"]({router:je,store:Re,render:function(e){return e(h)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var n=a("9c0c"),s=a.n(n);s.a},6961:function(e,t,a){},"6e82":function(e,t,a){},"717e":function(e,t,a){e.exports=a.p+"img/shop.7681029f.png"},"88a3":function(e,t,a){},"8f81":function(e,t,a){},"94d5":function(e,t){},"9c0c":function(e,t,a){},a8c1:function(e,t,a){"use strict";var n=a("6e82"),s=a.n(n);s.a},d611:function(e,t,a){},fd9a:function(e,t,a){"use strict";var n=a("6961"),s=a.n(n);s.a}});
//# sourceMappingURL=app.c7d08193.js.map